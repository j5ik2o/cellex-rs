# type-per-file-lint 仕様

## 目的

- 構造体・列挙型・トレイト定義をファイル単位で分離し、ソースツリー全体の可読性と可搬性を向上させる。
- Java などの慣習にならい「1つの型 = 1つのファイル」を徹底するための安全網を提供する。

## ルール

- 同一ファイル内で 2 つ以上の `struct` / `enum` / `trait` が定義された場合は違反とみなす。
- `#[allow(type_per_file::multiple_type_definitions)]` などで明示的に無効化されている箇所は例外とする。
- ビルド生成物や `tests/` ディレクトリ配下、`*_tests.rs`・`tests.rs` は対象外とする。
- マクロ展開で生成された型定義は対象外とする。

## 推奨される修正手順

1. 既存ファイルに複数の型がある場合は、主要な型と同名のファイルに分割する (`git mv foo.rs foo_type.rs` など)。
2. 分割後は親モジュールから `mod` 宣言を追加し、必要に応じて `pub use` で公開する。
3. テストやサポート用の型は `tests/` ディレクトリや専用モジュールに移動する。

## 診断メッセージ指針

- 違反箇所では 2 番目以降の型定義をハイライトし、先に定義されている型情報を `note` で提示する。
- `help` には新しいファイルへ移動する方針を案内し、`AI向けアドバイス` で実務的な手順を補足する。
