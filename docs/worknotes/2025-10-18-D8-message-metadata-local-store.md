# 2025-10-18 D8 メッセージローカルメタデータ移行メモ

## 決定事項
- グローバルサイドテーブル方式を採用しない。Envelope 内にローカルストアを持たせ、優先度・チャネル・任意メタ情報を直接保持する。
- Remote/Cluster 経路ではローカルストアの内容をそのままシリアライズし、ACK や TTL に依存した寿命管理を不要化する。

## 次アクション
- 参照箇所棚卸しリストを作成し、移行の影響範囲を可視化する。
- Envelope 拡張の API 仕様（メタデータ挿入・取得インターフェース）をプロトタイピングする。
- Remote シリアライザのメッセージ定義案を起草し、Priority チャネル統合テストケースを設計する。

## メモ
- 旧 `runtime::message::metadata_table` 関連コードは段階的に削除予定。互換レイヤは移行期間限定で提供する見込み。
